# Frontend Upload – как се подготвя файл за изпращане

## Уводни думи:
> Ще ви покажа как изглежда процесът по качване на файлове от страна на потребителя – как го правихме преди и как се прави днес с по-добро потребителско изживяване.

## Работа с ```html <input type="file">```, File, Blob, FormData
- **html тагът input от тип file** - таг, който репрезентира най-стария и най-простия вариант за качване на файлове, който обаче не предлага добро потребителско изживяване, тъй като ограничава начините, по които потребителят може да качи файл до избор на такъв без право на привлачане.
- **File** - обект, който се инициализира при избор на файл за качване от страна на потребителя.
- **Blob** - представлява бинарни данни. Често в такъв формат се съхраняват много големи файлове като филми, изображения и прочие. Също така този тип данни е полезен, когато искаме да създаваме данни от JS.
- **FormData** - обект, чрез който може да изпращаме файлове към сървъра. Файл към сървъра се добавя като създадем обект от тип FormData и му добавим файла чрез метода append.

## Демонстрация наживо

### ```html <input type="file">``` - остарял вариант
- по време на демонстраацията показвам как се избират файлове и тов, че след избор на файл потребителят вижда единствено името и разширението му, тоест не може да прегледа съдържанието му или някаква допълнителна информация за него като размера му, също както не може да го придърпа, за да го добави - **товаа ограничава потребителя и прави преживяването му по-малко запомнящо се**. 
### Как да направим drag-and-drop upload (интересен UX touch)
- **dropzone** - във второто демо демонстрирам употребата на библиотеката dropzone в съчетание с react и tailwind, за да направя малко по-добро потребителското изживяване като позволя на потребителя всичко, което досега не му беше позволено в предишното демо. В това демо съм подобрила дизайна, позволила съм придърпване на файловете, но и не забранявам тахното ръчно избиране, унаследено поведение от **"стария начин с file input тага"**. 

### JS/TS код за преглед на файл (preview image, read text)
- **file.preview** - във второто демо позволявам също така потребителят да вижда пълното съдържание на файла (снимка или текстов файл, но може да се доразгърне и с друг тип файлове), така че да може да получи една сигурност, относно дали качвания от него файл е правилният преди реално да го качи. 
- Използваме FileReader, за да прочетем съдържанието на файла:
    - За изображения – readAsDataURL() → получаваме base64.
    - За текстови файлове – readAsText() → директен текст.
- След това показваме съдържанието:
    - ```html <img>``` за изображения.
    - ```html <pre>``` за текстови файлове.
> **Това е полезно, ако искаме преглед преди качване, UX подобрение.**

## Финални думи
> Работата с файлове във фронтенда комбинира HTML, JS и UX практики. Старият начин работи, но модерният подход с drag-n-drop и preview е по-интуитивен. Това показва колко важен е добрият UX дори в нещо просто като качване на файл.